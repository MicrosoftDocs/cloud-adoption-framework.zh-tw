---
title: 機器學習作業進程
description: 瞭解機器學習作業程式。
author: mufajjul
ms.author: brblanch
ms.date: 01/20/2021
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: innovate
ms.custom: think-tank
ms.openlocfilehash: 19d4961034aca6505c93d3ccd408267c71dffba9
ms.sourcegitcommit: 9cd2b48fbfee229edc778f8c5deaf2dc39dfe2d6
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/01/2021
ms.locfileid: "99230286"
---
# <a name="the-machine-learning-operations-process"></a>機器學習作業進程

## <a name="the-model-development-process"></a>模型開發流程

開發流程應該會產生下列結果：

- 定型是自動化的，而且會驗證模型，其中包括測試功能和效能 (例如，使用精確度度量) 。

- 部署到用於推斷 (的基礎結構，包括監視) 會自動進行。

- 機制會建立端對端資料審核記錄。 當資料經過一段時間的偏離時（與大規模、機器學習注入的系統相關），會進行自動重新定型模型。

下圖描述機器學習系統的部署生命週期：

![機器學習服務生命週期的圖表。](./media/ml-lifecycle.png)

開發完成後，就會訓練、驗證、部署和監視機器學習模型。 從組織的觀點來看，以及管理和技術層級，請務必定義擁有並執行此流程的人員。 在較大型的企業中，資料科學家可能會擁有模型定型和驗證步驟，而機器學習工程師可能會傾向于剩餘的步驟。 在小型公司中，資料科學家可能會擁有所有步驟。

### <a name="train-the-model"></a>將模型定型

在這個步驟中，訓練資料集會訓練機器學習模型。 定型程式碼是版本控制且可重複使用的功能，這項功能可優化按鈕點擊和事件觸發程式 (例如，新版本的資料變成可用) ，以便將模型的定型方式自動化。

### <a name="validate-the-model"></a>驗證模型

此步驟會使用已建立的計量（例如精確度度量）來自動驗證新定型的模型，並將其與較舊的模型進行比較。 其精確度是否增加？ 如果是，此模型可能會在模型登錄中註冊，以確保後續步驟可以使用它。 如果新模型執行的效能較差，資料科學家就會收到警示，以調查為何或捨棄新定型的模型。

### <a name="deploy-the-model"></a>部署模型

在部署步驟中，將模型部署為 web 應用程式的 API 服務。 這種方法可讓模型與應用程式分開擴充和更新。 或者，您也可以使用模型來執行批次評分，以在其上使用一次或定期計算新資料點的預測。 當需要以非同步方式處理大量資料時，這非常有用。 如需部署模型的詳細資訊，請參閱 [部署頁面中的機器學習推斷](./ml-deployment-inference.md) 。

### <a name="monitor-the-model"></a>監視模型

有兩個主要原因需要監視模型。 首先，監視模型有助於確保其技術上的功能性;例如，能夠產生預測。 如果組織的應用程式相依于模型並即時使用，這就很重要。 監視模型也可協助組織測量是否持續產生有用的預測。 當發生資料漂移時（例如用來定型模型的資料，與在預測階段傳送給模型的資料大不相同），這可能不會很有用。 例如，針對將產品推薦給年輕人員所定型的模型，可能會在向不同年齡群組的人員推薦產品時產生不必要的結果。 資料漂移的模型監視可以偵測這種類型的不符、警示機器學習工程師，並使用更多相關或較新的資料來自動重新定型模型。

### <a name="how-to-monitor-models"></a>如何監視模型

由於針對較佳效能調整的資料漂移、季節性或較新的架構，可能會導致模型效能隨著時間 wane，因此請務必建立持續部署模型的進程。 某些最佳作法包括：

- **擁有權：** 應將擁有者指派給模型效能監視進程，以主動管理其效能。

- **發行管線：** 先在 [Azure DevOps](/azure/devops/user-guide/what-is-azure-devops) 中設定發行管線，並將觸發程式設定為模型登錄。 在登錄中註冊新的模型時，發行管線會在部署程式上觸發並登出。

## <a name="prerequisites-for-retraining-models"></a>重新定型模型的必要條件

[從生產環境中收集模型的資料](/azure/machine-learning/how-to-enable-data-collection) 是在持續整合/持續開發架構中重新定型模型的必要條件之一，而此程式會使用評分要求的輸入資料。 這項功能目前僅限於可使用最少格式和操作剖析為 JSON 的表格式資料;影片、音訊和影像都已排除。 這項功能適用于 Azure Kubernetes Service (AKS) 上的模型。 收集的資料會儲存在 Azure blob 中。

若要準備重新定型模型：

1. **從收集到的輸入資料監視資料漂移。** 設定監視進程需要從生產資料中解壓縮時間戳記。 這是比較生產資料和基準資料 (用來建立模型) 之定型資料的必要項。 監視資料漂移的慣用方法是透過 Azure 監視器 Application Insights。 這項功能提供可觸發電子郵件、SMS 文字、推播或 Azure Functions 等動作的 [警示](/azure/machine-learning/how-to-monitor-datasets#metrics-alerts-and-events) 。 您必須 [啟用](/azure/machine-learning/how-to-enable-app-insights#configure-logging-with-azure-machine-learning-studio) Application Insights 來記錄資料。

1. **分析收集的資料。** 請務必在 [生產環境中收集模型的資料](/azure/machine-learning/how-to-enable-data-collection)，並將結果包含在模型評分腳本中。 收集模型計分所使用的所有功能，因為這可確保所有必要的功能都存在，而且可用來做為定型資料。

1. **決定是否需要使用所收集的資料重新定型。** 許多專案都會造成資料漂移，包括感應器問題季節性、使用者行為變更，以及與資料來源相關的資料品質問題。 在所有情況下都不需要重新定型模型，因此建議您先調查並瞭解資料漂移的原因，再進行這項操作。

1. **重新定型模型。** 模型定型應已自動化，而且此步驟牽涉到觸發目前的定型步驟。 這可能適用于偵測到資料漂移 (，且與資料問題) 無關，或是資料工程師已發行新版本的資料集時。 視使用案例而定，這些步驟可以完全自動化或由人類監督。 例如，雖然某些使用案例（例如產品建議）可能會在未來自行執行，但財務中的其他人會將標準視為模型公平和透明度，並且需要人工核准新定型的模型。

一開始，組織通常只會自動執行模型的定型和部署，而不是手動執行的驗證、監視和重新定型步驟。 最後，這些工作的自動化步驟可以在達到預期狀態之前進行。 DevOps 和機器學習服務是一段時間開發的概念，而組織應留意其演進。

## <a name="the-team-data-science-process-lifecycle"></a>Team Data Science Process 生命週期

Team Data Science Process (TDSP) 會提供建構資料科學專案開發的生命週期。 生命週期可描繪出專案一般執行時 (通常會反覆進行) 的主要階段：

- 了解商務
- 資料取得與認知
- 模型化
- 部署

[小組資料科學程式生命週期](/azure/machine-learning/team-data-science-process/lifecycle)中會說明 TDSP 生命週期每個階段的目標、工作和檔成品。

## <a name="the-roles-and-activities-within-machine-learning-operations"></a>機器學習作業中的角色和活動

根據 TDSP 生命週期，AI 專案中的關鍵角色是資料工程師、資料科學家和機器學習作業工程師。 這些角色對您專案的成功是很重要的，而且必須配合精確、可重複、可調整且可供生產環境使用的解決方案。

[![顯示機器學習作業程式的圖表。](./media/mlops-process.png)](./media/mlops-process.png#lightbox)

- **資料工程師：** 此角色會內嵌、驗證和清除資料。 資料經過微調後，就會進行編目，供資料科學家使用。 在這個階段中，請務必探索和分析重複的資料、移除極端值，並找出遺漏的資料。 這些活動應該在管線步驟中定義，並且在定型管線已前置處理時執行。 必須將唯一的和特定名稱指派給核心和產生的功能。

- **資料科學家 (或 AI 工程師) ：** 此角色會導覽定型管線程式並評估模型。 資料科學家會接收來自資料工程師的資料，並識別其內的模式和關聯性，可能會選取或產生實驗的功能。 由於功能設計在建立音效一般化模型方面扮演了重要的角色，因此這一階段的關鍵就是盡可能徹底完成。 您可以使用不同的演算法和超參數來執行各種實驗。 自動化機器學習等 Azure 工具可以將這項工作自動化，這項工作也有助於下過度學習模型。 成功定型的模型接著會在模型登錄中註冊。 模型應該具有唯一且特定的名稱，而且應該保留版本歷程記錄以供追蹤。

- **機器學習作業工程師：** 此角色會建立持續整合和傳遞的端對端管線。 這包括將模型封裝在 Docker 映射中、驗證和分析模型、等待專案關係人核准，以及在容器協調流程服務（例如 AKS）中部署模型。 在持續整合期間可以設定各種觸發程式，而模型的程式碼可以在之後觸發定型管線和發行管線。
