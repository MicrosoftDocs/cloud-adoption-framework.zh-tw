---
title: 記錄與報告決策指南
description: 了解 Azure 移轉中的新服務：記錄、報告和監視。
author: rotycenh
ms.author: v-tyhopk
ms.date: 02/11/2019
ms.topic: guide
ms.service: cloud-adoption-framework
ms.subservice: decision-guide
ms.custom: governance
ms.openlocfilehash: 038137088abe02160fd199cef468ecc5d5756281
ms.sourcegitcommit: 2362fb3154a91aa421224ffdb2cc632d982b129b
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/28/2020
ms.locfileid: "76806759"
---
# <a name="logging-and-reporting-decision-guide"></a>記錄與報告決策指南

所有組織都需要通知機制，以在效能、運作時間與安全性產生疑慮時通知 IT 小組，避免疑慮變成嚴重的問題。 成功的監視策略可讓您了解工作負載和網路基礎結構個別構成元件的執行狀況。 在公用雲端移轉的情況下，將記錄和報告與任何現有的監視系統整合，同時向正確的 IT 人員呈現適當的重要事件和度量至關重要，因為這可以確保您的組織符合運作時間、安全性和原則合規性目標。

![規劃符合下列快速連結的記錄、報告和監視選項 (從最簡單到最複雜)](../../_images/decision-guides/decision-guide-logging-and-reporting.png)

跳至：[規劃監視基礎結構](#plan-your-monitoring-infrastructure) | [雲端原生](#cloud-native) | [內部部署擴充](#on-premises-extension) | [閘道彙總](#gateway-aggregation) | [混合式監視 (內部部署)](#hybrid-monitoring-on-premises) | [混合式監視 (雲端式)](#hybrid-monitoring-cloud-based) | [多重雲端](#multicloud) | [深入了解](#learn-more)

判斷雲端記錄與報告策略時，關鍵點主要是依據您的組織在作業流程上所做的現有投資，以及對多重雲端策略在某種程度上的支援需求。

雲端中的活動可以用多種方式記錄和報告。 雲端原生和集中式記錄是運用訂用帳戶設計和訂用帳戶數目的兩個常見的受控服務選項。

## <a name="plan-your-monitoring-infrastructure"></a>規劃監視基礎結構

規劃部署時，需考量記錄資料儲存位置，以及如何將雲端式報告和監視服務與現有的處理程序和工具整合。

| 問題 | 雲端原生 | 內部部署擴充功能 | 混合式監視 | 閘道彙總 |
|-----|-----|-----|-----|-----|
| 您已經擁有內部部署監視基礎結構嗎？ | 否 | 是 | 是 |  否 |
| 您有避免將記錄資料儲存在外部儲存位置的需求嗎？ | 否 | 是 | 否 | 否 |
| 您需要整合雲端監視與內部部署系統嗎？ | 否 | 否 | 是 | 否 |
您需要先處理或篩選遙測資料再將它們提交至監視系統嗎？ | 否 | 否 | 否 | 是 |

### <a name="cloud-native"></a>雲端原生

如果您的組織目前尚未建置記錄和報告系統，或您規劃的部署不需要與現有內部部署或其他外部監視系統整合，雲端原生 SaaS 解決方案 (例如 [Azure 監視器](https://docs.microsoft.com/azure/azure-monitor/overview)) 就是您最簡單的選擇。

在此案例中，所有日誌資料都記錄並儲存在雲端中，而處理資訊並向 IT 人員呈現資訊的日誌記錄和報告工具是由 Azure 平台和 Azure 監視器提供。

自訂 Azure 監視器式記錄解決方案可以依據較小型或實驗性部署中的每個訂用帳戶或工作負載進行實作，並以集中方式安排組織，以監控整個雲環境的記錄資料。

**雲端原生假設事項：** 使用雲端原生記錄和報告系統時會假設以下事項：

- 您不需要將記錄資料從雲端工作負載整合到現有的內部部署系統中。
- 您將不會使用雲端式報告系統監視內部部署系統。

### <a name="on-premises-extension"></a>內部部署擴充功能

對於移轉至雲端的應用程式和服務，可能需要大量的重新開發工作才能使用雲端式記錄和報告解決方案，例如 Azure 監視器。 在這些情況下，請考慮允許這些工作負載繼續向現有的內部部署系統傳送遙測資料。

為了支援這種方法，您的雲端資源必須能夠透過結合[混合式網路功能](../software-defined-network/hybrid.md)和[雲端裝載網域服務](../identity/index.md#cloud-hosted-domain-services)，直接與您的內部部署系統通訊。 然後雲端虛擬網路才能以內部部署環境網路擴充功能的形式運作。 如此一來，雲端裝載工作負載才能直接與您的內部部署記錄和報告系統通訊。

這個方法會運用您在監控工具上的現有投資，對任何雲端部署的應用程序或服務進行有限的修改。 這通常是進行隨即移轉時支援監視的最快方法。 但是這不會擷取雲端 PaaS 和 SaaS 資源製造的記錄資料，而且將會省略雲端平台產生的任何 VM 相關記錄，例如 VM 狀態。 因此應將此模式視為實作更完善混合式監視解決方案之前的暫時性解決方案。

僅限內部部署假設事項：

- 您只需要在內部部署環境中維護記錄資料 (基於支援技術需求或法規或原則需求)。
- 您的內務部署系統不支援混合式記錄和報告或閘道彙總解決方案。
- 您的雲端式應用程式可以直接向內部記錄系統提交遙測資料，或向內部部署系統提交遙測資料的監視代理程式可以部署至工作負載 VM。
- 您的工作負載無須依賴需要雲端式記錄和報告的 PaaS 或 SaaS 服務。

### <a name="gateway-aggregation"></a>閘道彙總

對於雲端遙測資料量很大，或現有內部部署監視系統需要先修改記錄資料才能加以處理的案例，可能就需要記錄資料[閘道彙總](https://docs.microsoft.com/azure/architecture/patterns/gateway-aggregation)服務。

閘道服務會部署至您的雲端提供者。 然後將相關應用程式和服務設定為提交遙測資料給閘道，而不是提交給預設的記錄系統。 接著閘道可以處理資料 (彙總、結合或設定資料格式)，然後再將資料提交給您的監視服務以進行擷取及分析。

此外，閘道也可以用來彙總及預先處理要提交給雲端或混合式系統的遙測資料。

閘道彙總假設事項：

- 您預期您的雲端式應用程式或服務將會產生大量遙測資料。
- 您需要先設定遙測資料格式或將資料最佳化，才能將它們提交給監視系統。
- 您的監視系統具備可用來擷取閘道處理後的記錄資料的 API 或其他機制。

### <a name="hybrid-monitoring-on-premises"></a>混合式監視 (內部部署)

混合式監視解決方案可結合來自內部部署和雲端資源的記錄資料，以提供 IT 資產運作狀態的整合式檢視。

如果您已經投資並擁有取代難度高或取代代價高昂的內部部署監視系統，就可能需要將來自雲端工作負載的遙測資料整合到現有的內部部署監視解決方案。 在混合式內部部署監視系統中，內部部署遙測資料會繼續使用現有的內部部署監視系統。 雲端遙測資料則會直接傳送至內部部署監視系統，或者資料會傳送至 Azure 監視器，然後定期經過編譯並擷取到內部部署系統中。

**內部部署混合式監視假設事項：** 使用內部部署記錄和報告系統以進行混合式監視時會假設以下事項：

- 您需要使用現有的內部部署報告系統監視雲端工作負載。
- 您需要維護記錄資料內部部署的擁有權。
- 您的內部部署管理系統具備可用來從雲端系統擷取記錄資料的 API 或其他機制。

> [!TIP]
> 由於雲端移轉具有反覆性，從不同的雲端原生和內部部署監視轉換成部分混合式方法，可能會如同將雲端資源和服務整合到您的整體 IT 資產中日趨成熟一樣。

### <a name="hybrid-monitoring-cloud-based"></a>混合式監視 (雲端式)

如果您沒有維護內部部署監視系統的迫切需求，或想要以集中式雲端解決方案取代內部部署監視系統，您也可以選擇將內部部署記錄資料與 Azure 監視器整合，以提供集中式雲端監視系統。

鏡像內部部署集中式方式 (在此案例中，雲端式工作負載會直接將遙測資料提交至 Azure 監視器)，與內部部署應用程式和服務會將遙測資料傳送至 Azure 監視器，或定期彙總該內部部署資料以擷取至 Azure 監視器中。 Azure 監視器就能作為您整個 IT 資產的主要監視與報告系統。

雲端混合式監視假設事項：使用雲端式記錄和報告系統以進行混合式監視時會假設以下事項：

- 您不需依賴現有的內部部署監視系統。
- 您的工作負載沒有需將記錄資料儲存在內部部署系統的法規或原則需求。
- 您的雲端式管理系統具備可用來從內部部署應用程式和服務擷取記錄資料的 API 或其他機制。

### <a name="multicloud"></a>多重雲端

跨多個雲端平台整合記錄和報告功能可能會是非常複雜的工作。 平台之間提供的服務通常無法直接比較，而且這些服務提供的記錄與遙測功能也不盡相同。
多重雲端記錄支援通常需要先使用閘道服務將記錄資料處理成通用格式，然後再將資料提交給混合式記錄解決方案。

## <a name="learn-more"></a>深入了解

[Azure 監視器](https://docs.microsoft.com/azure/azure-monitor/overview)是 Azure 預設的報告和監視服務。 它提供：

- 一個統一平台，用來收集應用程式遙測資料、主機遙測資料 (例如 VM)、容器計量、Azure 平台計量，以及事件記錄檔。
- 視覺效果、查詢、警示和分析工具。 它可提供虛擬機器、客體作業系統、虛擬網路，以及工作負載應用程式事件的深入解析。
- [REST API](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-rest-api-walkthrough)，用來與外部服務整合，以及將監視與警示服務自動化。
- 與許多熱門的第三方廠商[整合](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-partners)。

## <a name="next-steps"></a>後續步驟

記錄和報告只是在雲端採用程序期間需要架構決策的其中一個核心基礎結構元件。 請瀏覽[決策指南概觀](../index.md)，以了解在為其他類型的基礎結構制定設計決策時使用的替代模式或模型。

> [!div class="nextstepaction"]
> [架構相關決策指南](../index.md)
