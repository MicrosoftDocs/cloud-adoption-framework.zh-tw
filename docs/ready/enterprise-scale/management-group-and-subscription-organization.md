---
title: 管理群組和訂用帳戶組織
description: 管理群組和訂用帳戶組織。
author: BrianBlanchard
ms.author: brblanch
ms.date: 06/15/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: a3f72d69220d30ac319ffa5c0aa1d266a8b568a3
ms.sourcegitcommit: 1b28a7c6e966c6e0b69304ebb4b11d218c1891e5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/20/2020
ms.locfileid: "92253448"
---
# <a name="management-group-and-subscription-organization"></a>管理群組和訂用帳戶組織

![顯示管理群組階層的圖表。](./media/sub-org.png)

_圖1：管理群組階層。_

## <a name="define-a-management-group-hierarchy"></a>定義管理群組階層

Azure Active Directory (Azure AD) 租用戶內的管理群組結構支援組織對應，在組織規劃大規模採用 Azure 時必須詳細考慮管理群組。

**設計考慮：**

- 您可以透過 Azure 原則，使用管理群組來匯總原則和方案指派。
- 管理群組樹狀結構最多可支援 [六個深度層級](/azure/governance/management-groups/overview#hierarchy-of-management-groups-and-subscriptions)。 這個限制不包含租用戶根層級或訂用帳戶層級。
- Azure AD 租使用者中的任何主體 (使用者、服務主體) 都可以建立新的管理群組，因為預設不會啟用管理群組作業的 RBAC 授權。
- 預設會將所有新的訂用帳戶放在根管理群組下。

**設計建議：**

- 最好將管理群組階層維持在不超過三到四個層級的情況下，使管理群組階層保持合理水準。 這種限制可降低管理負擔和複雜度。
- 避免將您的組織結構複製到深度巢狀的管理群組階層中。 管理群組應用於原則指派與計費用途。 這種方法需要在企業規模架構中使用管理群組作為其預定用途，這會為需要相同管理群組層級的相同安全性和合規性類型的工作負載提供 Azure 原則。
- 在您的根層級管理群組下建立管理群組，以代表您將裝載的工作負載類型 (原型) ，以及根據其安全性、合規性、連線能力和功能需求的工作負載。 此群組結構可讓您針對需要相同安全性、合規性、連線能力、功能設定的所有工作負載，在管理群組層級套用一組 Azure 原則。
- 使用可透過 Azure 原則強制執行或附加的資源標籤，以進行跨管理群組階層的查詢和水平導覽。 接著，您可以將資源分組以滿足搜尋需求，而不需要使用複雜的管理群組階層。
- 建立最上層的沙箱管理群組，讓使用者能夠立即試驗 Azure。 然後，使用者可以試驗在實際執行環境中可能尚未允許的資源。 沙箱可提供與開發、測試、實際執行環境隔離的環境。
  - 如需最上層沙箱管理群組的進一步指引，請參閱 [實施指導方針](/docs/ready/enterprise-scale/implementation-guidelines.md)。
- 使用專用的服務主體名稱 (SPN) 來執行管理群組管理作業、訂用帳戶管理作業、角色指派。 使用 SPN 可減少較高權限的使用者人數，遵循最低權限方針。
- `User Access Administrator`在根管理群組範圍 (RBAC) 角色指派 Azure 角色型存取控制， (`/`) 以授與在根層級上提及的 SPN 存取權。 授與 SPN 許可權之後， `User Access Administrator` 就可以安全地移除角色。 如此一來，只有 SPN 是角色的一部分 `User Access Administrator` 。
- 將 `Contributor` 許可權指派給先前在根管理群組範圍中提及的 SPN (`/`) ，以允許租使用者層級的作業。 這個權限層級可確保 SPN 可用來部署和管理組織內任何訂用帳戶的資源。
- `Platform`在根管理群組下建立管理群組，以支援常見的平臺原則和 RBAC 指派。 此群組結構可確保不同的原則可以套用至您的 Azure 基礎所使用的訂用帳戶。 它也可確保一般資源的計費是集中在一組基本訂用帳戶中。
- 限制在根管理群組範圍上進行的 Azure 原則指派數目 (`/`) 。 這項限制可使較低層級管理群組所繼承原則的偵錯最小化。
- 在管理群組階層設定中啟用 RBAC 授權，以確保只有有許可權的使用者可以操作租使用者中的管理群組。
- 為新的訂用帳戶設定預設的專用管理群組，以確保不會在根管理群組下放置任何訂用帳戶。

## <a name="subscription-organization-and-governance"></a>訂用帳戶的組織和治理

訂用帳戶是 Azure 中管理、計費、縮放的單位。 當您設計大規模的 Azure 採用時，訂用帳戶扮演著重要的角色。 本節可協助您根據重要因素來擷取訂用帳戶需求和設計目標訂用帳戶。 這些因素包括環境類型、擁有權和治理模型、組織結構、應用程式組合。

**設計考慮：**

- 訂用帳戶可作為指派 Azure 原則的界限。 例如，安全的工作負載（例如支付卡產業 (PCI) 工作負載）通常需要額外的原則才能達成合規性。 與其使用管理群組來將需要 PCI 合規性的工作負載分組，您可以使用訂用帳戶來達到相同的隔離。 如此一來，您就不會有太多具有少數訂用帳戶的管理群組。
- 訂用帳戶可作為縮放單位，讓元件工作負載可以在平臺 [訂](/azure/azure-subscription-service-limits)用帳戶限制內調整。 在您的工作負載設計階段，請務必考慮訂用帳戶的資源限制。
- 訂用帳戶提供治理和隔離的管理界限，可建立明確的關注點分離。
- 您可以進行手動程式，並規劃未來的自動化，以限制 Azure AD 租使用者只能使用 Enterprise 合約註冊訂閱。 此程式可防止在根管理群組範圍建立 Microsoft 開發人員的網路訂用帳戶。

**設計建議：**

- 將訂用帳戶視為大眾化的管理單位，與商務需求和優先順序一致。
- 讓訂用帳戶擁有者知道其角色和責任：
  - 在 Azure AD Privileged Identity Management 中每季或每兩年執行一次存取權審查，以確保客戶組織內的使用者移動時不會增加權限。
  - 取得預算支出和資源使用的完整擁有權。
  - 確保原則合規性，並在必要時進行補救。
- 識別新訂用帳戶的需求時，請使用下列原則：
  - **調整限制：** 訂用帳戶可作為元件工作負載的縮放單位，以在平臺訂用帳戶限制內調整規模。 例如，大型特製化的工作負載 (例如高效能運算、IoT、SAP) 更適合使用分開的訂用帳戶來避開限制 (例如限制 50 個 Azure Data Factory 整合)。
  - **管理界限：** 訂用帳戶會提供治理和隔離的管理界限，讓您能夠清楚地分隔考慮。 例如，開發、測試、實際執行等不同環境通常會與管理觀點隔離。
  - **原則界限：** 訂用帳戶可作為 Azure 原則指派的界限。 例如，保護工作負載 (例如 PCI) 通常需要額外的原則才能達成合規性。 如果使用個別的訂用帳戶，則不需要全面考量這項額外負擔。 同樣地，相較於實際執行環境，開發環境可能會有更寬鬆的原則需求。
  - **目標網路拓撲：** 虛擬網路無法跨訂用帳戶共用，但它們可以使用不同的技術進行連線，例如虛擬網路對等互連或 Azure ExpressRoute。 當您決定是否需要新的訂用帳戶時，請考慮哪些工作負載必須彼此通訊。
- 依據大規模管理群組結構和原則需求，將訂用帳戶分到各管理群組之下。 群組可確保具有同一組原則和 RBAC 指派的訂用帳戶可以從管理群組繼承這些原則和指派，以避免重複的指派。
- 在管理群組中建立專用的管理訂用帳戶 `Platform` ，以支援 Azure 監視器 Log Analytics 工作區和 Azure 自動化 runbook 等全域管理功能。
- 必要時，請在管理群組中建立專用的身分識別訂用帳戶 `Platform` ，以裝載 Windows server Active Directory 網域控制站。
- 在管理群組中建立專用的連線訂用帳戶 `Platform` ，以裝載 Azure 虛擬 WAN 中樞、私人網域名稱系統 (DNS) 、ExpressRoute 線路和其他網路資源。 專用的訂用帳戶可確保所有的基礎網路資源會一起計費，並與其他工作負載隔離。
- 避免使用固定的訂用帳戶模型，並改為選擇一組彈性準則，來將組織內的訂用帳戶分組。 這種彈性可確保當您的組織結構和工作負載組成變更時，您可以建立新的訂用帳戶群組，而不是使用一組固定的現有訂閱。 一個大小不能適用於所有訂閱。 一個業務單位的運作方式可能不適合另一個。 某些應用程式可能會在相同登陸區域訂用帳戶內並存，而其他應用程式可能需要自己的訂用帳戶。

## <a name="configure-subscription-quota-and-capacity"></a>設定訂用帳戶配額和容量

每個 Azure 區域都包含有限數量的資源。 當您的企業級 Azure 採用會牽涉到大量資源數量時，請確定有足夠的容量和 SKU 可使用，而且可以瞭解和監視所能取得的容量。

**設計考慮：**

- 針對您的工作負載所需的每項服務，考慮 Azure 平台內的限制和配額，
- 請考慮所選 Azure 區域內的必要 Sku 可用性。 例如，新功能只能在特定區域中使用。 指定資源 (例如 VM) 的特定 SKU 可用性可能會因區域而不同。
- 請考慮訂用帳戶配額不會保證容量，而且會以每個區域為基礎來套用。

**設計建議：**

- 使用訂用帳戶作為縮放單位，並視需要相應放大資源和訂用帳戶。 然後，您的工作負載就可以在需要時使用所需的資源來擴增，而不會遇到 Azure 平台中的訂用帳戶限制。
- 使用保留的執行個體來排定所需區域中保留容量的優先順序。 如此一來，您的工作負載將會擁有所需的容量，即使在特定區域中該資源的需要很高也一樣。
- 使用自訂檢視建立儀表板，以監視已使用的容量層級。 設定在容量的使用率達到危急層級時 (例如 90% CPU 使用率) 發出警示。
- 在訂用帳戶佈建的過程中，引發配額增加的支援要求 (例如，訂用帳戶內可用的 VM 核心總數)。 這種做法可確保在您的工作負載需要超過預設限制之前，先設定好配額限制。
- 確定所選部署區域中有提供必要的服務和功能。

## <a name="establish-cost-management"></a>建立成本管理

技術資產的成本透明化是每個大型企業組織面臨的重大管理挑戰。 本節將探討的重要層面關係到如何在大型 Azure 環境中實現成本透明化。

**設計考慮：**

- 可能需要使用) 資源的共用平臺即服務 (PaaS 的計費模型，例如 Azure App Service 環境和 Azure Kubernetes Service，可能需要共用這些資源以達到更高的密度。
- 對非商業執行的工作負載使用「關閉排程」，將成本最佳化。
- 使用 Azure Advisor 來檢查成本最佳化的建議。

**設計建議：**

- 使用 Azure 成本管理和計費來進行成本匯總。 讓應用程式擁有者可以使用它。
- 使用 Azure 資源標籤進行成本分類和資源分組。 使用標籤可讓您針對共用訂用帳戶的工作負載，或跨多個訂用帳戶的指定工作負載，提供計費機制。
