---
title: 管理群組和訂用帳戶組織
description: 管理群組和訂用帳戶組織。
author: BrianBlanchard
ms.author: brblanch
ms.date: 06/15/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: 08190964655328dd9a3a4d7e8763256ac3704986
ms.sourcegitcommit: 76edf563a08ff7dc81c3fc2dc6c8972ab3b4c55b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/14/2020
ms.locfileid: "88237248"
---
# <a name="management-group-and-subscription-organization"></a>管理群組和訂用帳戶組織

![顯示管理群組階層的圖表。](./media/sub-org.png)

_圖1：管理群組階層。_

## <a name="define-a-management-group-hierarchy"></a>定義管理群組階層

Azure Active Directory (中的管理群組結構 Azure AD) 租使用者支援組織對應，而且必須在組織大規模規劃 Azure 採用時，將其視為完整的。

**設計考慮：**

- 管理群組可用來透過 Azure 原則匯總原則和方案指派。
- 管理群組樹狀目錄最多可支援 [六個層級的深度](https://docs.microsoft.com/azure/governance/management-groups/overview#hierarchy-of-management-groups-and-subscriptions)。 此限制不包含租使用者根層級或訂用帳戶層級。

**設計建議：**

- 在理想的情況下，讓管理群組階層以合理的方式呈現，且不超過三到四個層級。 這種限制可降低管理負荷和複雜度。
- 避免將您的組織結構複製到深度嵌套的管理群組階層。 管理群組應用於原則指派，與計費用途有關。 這種方法在企業級架構中，需要使用管理群組來作為其預期用途，這會針對在相同管理群組層級下要求相同型別安全性和合規性的工作負載提供 Azure 原則。
- 在根層級管理群組下建立管理群組，以代表您要裝載的工作負載類型 (原型) ，並根據其安全性、合規性、連線能力和功能需求。 此群組結構可讓您針對需要相同安全性、合規性、連線能力和功能設定的所有工作負載，在管理群組層級套用一組 Azure 原則。
- 使用可透過 Azure 原則強制執行或附加的資源標籤，以跨管理群組階層進行查詢和水準導覽。 接著，您可以將資源分組以滿足搜尋需求，而不需要使用複雜的管理群組階層。
- 建立最上層的沙箱管理群組，讓使用者能夠立即試驗 Azure。 然後，使用者可以試驗可能尚未在生產環境中允許的資源。 沙箱可讓您從開發、測試和生產環境中隔離。
-  (SPN) 使用專用的服務主體名稱，以執行管理群組管理作業、訂用帳戶管理作業和角色指派。 使用 SPN 可減少許可權較高的使用者人數，並遵循最低許可權方針。
- `User Access Administrator`在根管理群組範圍 (RBAC) 角色指派 Azure 角色型存取控制， () 將 `/` 根層級所提及的存取權授與 SPN。 授與 SPN 許可權之後， `User Access Administrator` 就可以安全地移除角色。 如此一來，只有 SPN 是角色的一部分 `User Access Administrator` 。
- 指派 `Contributor` 許可權給先前在根管理群組範圍中所述的 SPN (`/`) ，這可允許租使用者層級的作業。 這個許可權層級可確保 SPN 可用來部署和管理組織內任何訂用帳戶的資源。
- `Platform`在根管理群組下建立管理群組，以支援一般平臺原則和 RBAC 指派。 此群組結構可確保不同的原則可以套用至您的 Azure foundation 所使用的訂用帳戶。 它也可確保一般資源的計費是集中在一組基本訂用帳戶中。
- 限制在根管理群組範圍內進行的 Azure 原則指派數目 (`/`) 。 這項限制可將較低層級管理群組中的繼承原則最小化。
- 請勿在根管理群組下建立任何訂用帳戶。 此階層可確保訂用帳戶不只會繼承在根層級管理群組指派的一小組 Azure 原則，這不代表工作負載所需的完整設定。

## <a name="subscription-organization-and-governance"></a>訂用帳戶組織和治理

訂用帳戶是 Azure 中的管理、計費和調整單位。 當您針對大規模的 Azure 採用進行設計時，他們扮演重要的角色。 本節可協助您根據重要因素來捕捉訂閱需求和設計目標訂閱。 這些因素包括環境類型、擁有權和治理模型、組織結構和應用程式組合。

**設計考慮：**

- 訂用帳戶會作為指派 Azure 原則的界限。 例如， (PCI) 工作負載的安全工作負載（例如付款卡產業）通常需要額外的原則才能達成合規性。 您可以使用訂用帳戶來達到相同的隔離，而不是使用管理群組來分組需要 PCI 合規性的工作負載。 如此一來，您就不會有太多的管理群組具有少數訂閱。
- 訂用帳戶會做為縮放單位，讓元件工作負載可在平臺訂用帳戶 [限制](https://docs.microsoft.com/azure/azure-subscription-service-limits)內進行調整。 請務必考慮您的工作負載設計會話期間的訂用帳戶資源限制。
- 訂用帳戶提供控管和隔離的管理界限，以明確區分考慮。
- 有一個手動程式，規劃未來的自動化，可將 Azure AD 租使用者限制為僅使用 Enterprise 合約的註冊訂閱。 此程式可防止在根管理群組範圍建立 Microsoft 開發人員網路訂閱。

**設計建議：**

- 將訂用帳戶視為符合業務需求和優先順序的大眾化管理單位。
- 讓訂用帳戶擁有者知道其角色和責任：
  - 在 Azure AD Privileged Identity Management 每季或兩年執行存取權審查，以確保在使用者于客戶組織內移動時，不會增加許可權。
  - 取得預算支出和資源使用率的完整擁有權。
  - 請確保原則合規性，並在必要時進行補救。
- 識別新訂閱的需求時，請使用下列原則：
  - **調整限制：** 訂用帳戶會作為元件工作負載的縮放單位，以在平臺訂用帳戶限制內進行調整。 例如，大型、特製化的工作負載（例如高效能運算、IoT 和 SAP）都更適合使用不同的訂用帳戶來避免限制 (例如 50 Azure Data Factory 整合) 的限制。
  - **管理界限：** 訂用帳戶提供控管和隔離的管理界限，讓您能夠清楚區分問題。 例如，開發、測試和生產等不同環境通常會與管理觀點隔離。
  - **原則界限：** 訂用帳戶可作為 Azure 原則指派的界限。 例如，安全的工作負載（例如 PCI）通常需要額外的原則才能達成合規性。 如果使用個別的訂用帳戶，則不需要將此額外負荷視為全面性地。 同樣地，開發環境可能會有更寬鬆的原則需求（相對於生產環境）。
  - **目標網路拓撲：** 虛擬網路無法跨訂用帳戶共用，但它們可以使用不同的技術（例如虛擬網路對等互連或 Azure ExpressRoute）進行連線。 當您決定是否需要新的訂用帳戶時，請考慮哪些工作負載必須彼此通訊。
- 在管理群組結構和大規模原則需求中一致地群組訂用帳戶。 群組可確保具有同一組原則和 RBAC 指派的訂用帳戶可以從管理群組繼承這些訂用帳戶，以避免重複的指派。
- 在管理群組中建立專用管理訂用帳戶 `Platform` ，以支援 Azure 監視器 Log Analytics 工作區和 Azure 自動化 runbook 之類的全域管理功能。
- 必要時，請在管理群組中建立專用的身分識別訂用帳戶 `Platform` ，以裝載 Windows server Active Directory 網域控制站。
- 在管理群組中建立專用的連線訂用帳戶 `Platform` ，以裝載 Azure 虛擬 WAN 中樞、私人網域名稱系統 (DNS) 、ExpressRoute 線路和其他網路資源。 專用的訂用帳戶可確保所有的基礎網路資源會一起計費，並與其他工作負載隔離。
- 請避免使用固定的訂用帳戶模型，並改為選擇一組彈性準則，以將組織內的訂閱分組。 這種彈性可確保當您的組織結構和工作負載撰寫變更時，您可以建立新的訂用帳戶群組，而不是使用一組固定的現有訂閱。 其中一個大小不適合訂閱。 一個業務單位的運作方式可能不適用於另一個。 有些應用程式可能會並存于相同的登陸區域訂用帳戶中，有些則可能需要自己的訂用帳戶。

## <a name="configure-subscription-quota-and-capacity"></a>設定訂用帳戶配額和容量

每個 Azure 區域都包含有限數量的資源。 當您考慮使用包含大量資源數量的企業規模 Azure 採用時，請確定有足夠的容量和 Sku 可用，而且可以瞭解和監視所能取得的容量。

**設計考慮：**

- 針對您的工作負載所需的每項服務，請考慮 Azure 平臺內的限制和配額。
- 請考慮所選 Azure 區域內所需的 Sku 可用性。 例如，新功能只能在特定區域中使用。 指定資源（例如 Vm）的特定 Sku 可用性可能會與另一個區域不同。
- 請考慮，訂用帳戶配額不是容量保證，而且會以每個區域為基礎來套用。

**設計建議：**

- 使用訂用帳戶做為縮放單位，並視需要相應放大資源與訂用帳戶。 然後，您的工作負載就可以在需要時使用必要的資源來相應放大，而不會在 Azure 平臺中遇到訂用帳戶限制。
- 使用保留的實例來排定所需區域中保留容量的優先順序。 然後您的工作負載將會擁有所需的容量，即使在特定區域中，該資源的需求很高也一樣。
- 使用自訂視圖建立儀表板，以監視已使用的容量層級。 如果容量使用率達到關鍵性層級，則設定警示 (例如，90% CPU 使用率) 。
- 在訂用帳戶布建 (例如，訂用帳戶) 中的可用 VM 核心總數中，引發增加配額的支援要求。 這種方法可確保您的配額限制會在工作負載需要超過預設限制之前設定。
- 確保所選部署區域中有提供必要的服務和功能。

## <a name="establish-cost-management"></a>建立成本管理

技術資產的成本透明化是每個大型企業組織面臨的重大管理挑戰。 本節將探討與在大型 Azure 環境中如何達成成本透明度相關的重要層面。

**設計考慮：**

- 可能需要使用「共用平臺即服務」 (PaaS) 資源的計費模式，例如 Azure App Service 環境和 Azure Kubernetes Service，這可能需要共用才能達到較高的密度。
- 使用 [關閉排程] 來非生產工作負載，以將成本優化。
- 使用 Azure Advisor 來檢查成本優化建議。

**設計建議：**

- 使用 Azure 成本管理和計費來進行成本匯總。 讓應用程式擁有者可以使用它。
- 使用 Azure 資源標記進行成本分類和資源群組。 使用標籤可讓您針對共用訂用帳戶的工作負載，或跨多個訂用帳戶的指定工作負載，提供計費機制。
