---
title: 管理群組和訂用帳戶組織
description: 管理群組和訂用帳戶組織。
author: BrianBlanchard
ms.author: brblanch
ms.date: 06/15/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: d74b03459c306143a02936e22ef47dea4ab9d9a9
ms.sourcegitcommit: 1c123a413725f7d2bfce91e9a6fb9e8c8c59f37b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/24/2020
ms.locfileid: "85335950"
---
# <a name="management-group-and-subscription-organization"></a>管理群組和訂用帳戶組織

![管理群組階層](./media/sub-org.png)

_圖1：管理群組階層。_

## <a name="define-a-management-group-hierarchy"></a>定義管理群組階層

Azure Active Directory （Azure AD）租使用者內的管理群組結構支援組織對應，而且必須在組織大規模規劃 Azure 採用時全面考慮。

**設計考慮：**

- 管理群組可用來透過 Azure 原則匯總原則和方案指派。
- 管理群組樹狀目錄最多可支援[六個層級的深度](https://docs.microsoft.com/azure/governance/management-groups/overview#hierarchy-of-management-groups-and-subscriptions)。 此限制不包含根或訂用帳戶層級。

**設計建議：**

- 在理想的情況下，讓管理群組階層以合理的方式呈現，且不超過三到四個層級。 這可降低管理負荷和複雜度。

- 避免將您的組織結構複製到深度嵌套的管理群組階層。 管理群組應用於原則指派，與計費用途有關。 這需要在企業級架構中使用管理群組來做為其預期用途，這會針對在相同的管理群組層級下要求相同型別安全性和合規性的工作負載提供 Azure 原則。

- 在根層級管理群組下建立管理群組，以根據其安全性、合規性、連線能力和功能需求來代表您要裝載的工作負載（原型）類型。 這可讓您針對需要相同安全性、合規性、連線能力和功能設定的所有工作負載，在管理群組層級套用一組 Azure 原則。

- 使用可透過 Azure 原則強制執行或附加的資源標籤，以跨管理群組階層進行查詢和水準導覽。 這可協助將資源分組以進行搜尋需求，而不需要使用複雜的管理群組階層。

- 建立最上層的沙箱管理群組，讓使用者能夠立即試驗 Azure。 這可讓使用者試驗可能尚未在生產環境中允許的資源，並提供您的開發、測試和生產環境的隔離。

- 使用專用的服務主體名稱（SPN）來執行管理群組管理作業、訂用帳戶管理作業，以及角色指派。 這可減少具有較高許可權的使用者人數，並遵循最低許可權指導方針。

- `User Access Administrator`在根管理群組範圍（）指派 AZURE RBAC 角色 `/` ，以授與在根層級上所述的 SPN 存取權。 授與 SPN 許可權之後， `User Access Administrator` 就可以安全地移除角色。 這可確保只有 SPN 是角色的一部分 `User Access Administrator` 。

- 在 `Contributor` 根管理群組範圍（）將許可權指派給前述的 SPN `/` ，以允許租使用者層級的作業。 這可確保 SPN 可用來部署和管理組織內任何訂用帳戶的資源。

- `Platform`在根管理群組下建立管理群組，以支援一般平臺原則和角色型存取控制（RBAC）指派。 這可確保不同的原則可以套用至您的 Azure foundation 所使用的訂用帳戶，而且一般資源的計費會集中在一組基本訂用帳戶中。

- 限制在根管理群組範圍（）所做的 Azure 原則指派數目 `/` 。 這可將較低層級管理群組中的繼承原則排除在最少。

- 請勿在根管理群組下建立任何訂用帳戶。 這可確保訂用帳戶不只會繼承在根層級管理群組指派的一小組 Azure 原則，這不代表工作負載所需的完整設定。

## <a name="subscription-organization-and-governance"></a>訂用帳戶組織和治理

訂用帳戶是 Azure 內管理、計費和規模的單位，在設計大規模的 Azure 採用時，這些訂用帳戶扮演重要的角色。 本節將協助您根據重要因素（例如環境類型、擁有權和治理模型、組織結構和應用程式組合）來取得客戶訂用帳戶需求和設計目標訂閱。

**設計考慮：**

- 訂用帳戶會作為指派 Azure 原則的界限。 例如，安全的工作負載（例如支付卡產業（PCI）工作負載）通常需要額外的原則才能達成合規性。 不使用管理群組來將需要 PCI 合規性的工作負載分組，而是可以與訂用帳戶達成相同的隔離。 這可確保您沒有太多的管理群組具有少數訂閱。

- 訂用帳戶會做為縮放單位，讓元件工作負載可在平臺訂用帳戶[限制](https://docs.microsoft.com/azure/azure-subscription-service-limits)內進行調整。 請務必考慮您的工作負載設計會話期間的訂用帳戶資源限制。

- 訂用帳戶會提供管理界限來進行控管和隔離，並建立清楚的關注點分離。

- 有一個手動程式（規劃的未來自動化），可以將 Azure AD 的租使用者限制為僅使用企業註冊訂閱。 這可防止在根管理群組範圍建立 MSDN 訂閱。

**設計建議：**

- 將訂用帳戶視為符合業務需求和優先順序的大眾化管理單位。

- 讓訂用帳戶擁有者知道其角色和責任：

  - 在 Azure AD Privileged Identity Management 每季或兩年執行存取權審查，以確保在使用者于客戶組織內移動時，不會增加許可權。

  - 取得預算支出和資源使用率的完整擁有權。

  - 請確保原則合規性，並在必要時進行補救。

- 識別新訂閱的需求時，請使用下列原則：

  - **調整限制：** 訂用帳戶會作為元件工作負載的縮放單位，以在平臺訂用帳戶限制內進行調整。 例如，大型的特定工作負載（例如高效能運算、IoT 和 SAP）更適合使用不同的訂用帳戶來避免限制（例如限制為 50 Azure Data Factory 整合）。

  - **管理界限：** 訂用帳戶提供管理界限來進行控管和隔離，讓您有清楚的顧慮。 例如，開發、測試和生產等不同環境通常會與管理觀點隔離。

  - **原則界限：** 訂用帳戶可作為 Azure 原則指派的界限。 例如，安全的工作負載（例如 PCI）通常需要額外的原則來達成合規性，而且如果使用個別的訂用帳戶，則不需要將此額外負荷視為全面性地。 同樣地，開發環境可能會有更寬鬆的原則需求（相對於生產環境）。

  - **目標網路拓撲：** 虛擬網路無法跨訂用帳戶共用，但它們可以使用不同的技術（例如虛擬網路對等互連或 ExpressRoute）進行連線。 因此，在決定是否需要新的訂用帳戶時，請務必考慮哪些工作負載必須彼此通訊。

- 在管理群組結構和大規模原則需求中一致地群組訂用帳戶。 這可確保具有同一組原則和 RBAC 指派的訂用帳戶可以從管理群組繼承這些訂用帳戶，避免重複的指派。

- 在管理群組中建立專用管理訂用帳戶 `Platform` ，以支援 Azure 監視器 Log Analytics 工作區和 Azure 自動化 runbook 之類的全域管理功能。

- 必要時，請在管理群組中建立專用的身分識別訂用帳戶 `Platform` ，以裝載 Windows Server Active Directory 網域控制站。

- 在管理群組中建立專用的連線訂用帳戶 `Platform` ，以裝載 Azure 虛擬 WAN 中樞、私人 DNS、ExpressRoute 線路和其他網路資源。 這可確保所有的基礎網路資源會一起計費，並與其他工作負載隔離。

- 請避免使用固定的訂用帳戶模型，改為選擇一組彈性準則來分組組織中的訂閱。 這可確保當您的組織結構和工作負載撰寫變更時，您可以建立新的訂用帳戶群組，而不是使用一組固定的現有訂閱。 其中一個大小不適合訂閱;一個業務單位的運作方式可能不適用於另一個。 有些應用程式可能會並存于相同的登陸區域訂用帳戶中，有些則可能需要自己的訂用帳戶。

## <a name="configure-subscription-quota-and-capacity"></a>設定訂用帳戶配額和容量

每個 Azure 區域都包含有限數量的資源。 在考慮涉及大型資源數量的企業級 Azure 採用時，請確定有足夠的容量和 Sku 可供使用，並可瞭解和監視所需的容量。

**設計考慮：**

- 針對您的工作負載所需的每項服務，請考慮 Azure 平臺內的限制和配額。

- 請考慮所選 Azure 區域內所需的 Sku 可用性。 例如，新功能只能在特定區域中使用。 指定資源（例如 Vm）的特定 Sku 可用性可能與一個區域不同。

- 請考慮，訂用帳戶配額不是容量保證，而且會以每個區域為基礎來套用。

**設計建議：**

- 使用訂用帳戶做為縮放單位，並視需要相應放大資源與訂用帳戶。 這可確保您的工作負載可以在需要時使用所需的資源來相應放大，而不會在 Azure 平臺中遇到訂用帳戶限制。

- 使用保留的實例來排定所需區域中保留容量的優先順序。 這可確保您的工作負載會擁有所需的容量，即使在特定區域中，該資源的需求很高。

- 使用自訂視圖建立儀表板，以監視使用的容量層級。 如果容量使用率達到關鍵性層級（例如 90% CPU 使用率），請設定警示。

- 在訂用帳戶布建的過程中，引發配額增加的支援要求（例如，訂用帳戶內可用的 VM 核心總數）。 這可確保您的配額限制會在工作負載需要超過預設限制之前設定。

- 確保所選部署區域中有提供必要的服務和功能。

## <a name="establish-cost-management"></a>建立成本管理

技術資產的成本透明化是每個大型企業組織面臨的重大管理挑戰。 本節將探索與在大型 Azure 環境中如何達成成本透明度相關的重要層面。

**設計考慮：**

- 可能需要共用的平臺即服務（PaaS）資源所關心的計費模式，例如 Azure App Service 環境和 Azure Kubernetes Service，這可能需要共用才能達到較高的密度。

- 使用 [關閉排程] 來非生產工作負載，以將成本優化。

- 使用 Azure Advisor 來檢查成本優化建議。

**設計建議：**

- 使用 Azure 成本管理進行成本匯總，並將其提供給應用程式擁有者。

- 使用 Azure 資源標記進行成本分類和資源群組。 這可讓您針對共用訂用帳戶的工作負載，或跨多個訂用帳戶的指定工作負載，提供計費機制。
