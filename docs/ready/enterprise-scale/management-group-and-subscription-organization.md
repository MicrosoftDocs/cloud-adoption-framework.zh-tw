---
title: 管理群組和訂用帳戶組織
description: 管理群組和訂用帳戶組織。
author: BrianBlanchard
ms.author: brblanch
ms.date: 06/15/2020
ms.topic: conceptual
ms.service: cloud-adoption-framework
ms.subservice: ready
ms.openlocfilehash: 2d1da6f53890fd872e12fcc69e1dbc9c157c0950
ms.sourcegitcommit: 011525720bd9e2d9bcf03a76f371c4fc68092c45
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/18/2020
ms.locfileid: "88566759"
---
# <a name="management-group-and-subscription-organization"></a>管理群組和訂用帳戶組織

![顯示管理群組階層的圖表。](./media/sub-org.png)

_圖1：管理群組階層。_

## <a name="define-a-management-group-hierarchy"></a>定義管理群組階層

Azure Active Directory (Azure AD) 租使用者中的管理群組結構支援組織對應，而且必須在組織規劃大規模採用 Azure 時，將其視為完整的。

**設計考慮：**

- 您可以透過 Azure 原則，使用管理群組來匯總原則和方案指派。
- 管理群組樹狀結構最多可支援 [六個深度層級](/azure/governance/management-groups/overview#hierarchy-of-management-groups-and-subscriptions)。 此限制不包含租使用者根層級或訂用帳戶層級。

**設計建議：**

- 最好將管理群組階層維持在不超過三到四個層級的情況下，使管理群組階層保持合理水準。 這種限制可降低管理負擔和複雜度。
- 避免將組織結構複製到深度嵌套的管理群組階層。 管理群組應用於原則指派與計費用途。 這種方法需要在企業規模架構中使用管理群組作為其預定用途，這會為需要相同管理群組層級的相同安全性和合規性類型的工作負載提供 Azure 原則。
- 在您的根層級管理群組下建立管理群組，以代表您將裝載的工作負載類型 (原型) ，以及根據其安全性、合規性、連線能力和功能需求的工作負載。 此群組結構可讓您針對需要相同安全性、合規性、連線能力和功能設定的所有工作負載，在管理群組層級套用一組 Azure 原則。
- 使用可透過 Azure 原則強制執行或附加的資源標記，以查詢和水準流覽整個管理群組階層。 然後，您可以將資源分組以滿足搜尋需求，而不需要使用複雜的管理群組階層。
- 建立最上層的沙箱管理群組，以允許使用者立即試用 Azure。 然後，使用者可以試驗可能尚未在生產環境中允許的資源。 沙箱可提供您開發、測試和生產環境的隔離。
- 使用專屬的服務主體名稱 (SPN) 來執行管理群組管理作業、訂用帳戶管理作業和角色指派。 使用 SPN 可減少擁有較高許可權的使用者數目，並遵循最低許可權的指導方針。
- `User Access Administrator`在根管理群組範圍 (RBAC) 角色指派 Azure 角色型存取控制， (`/`) 以授與在根層級上提及的 SPN 存取權。 授與 SPN 許可權之後， `User Access Administrator` 就可以安全地移除角色。 如此一來，只有 SPN 是角色的一部分 `User Access Administrator` 。
- 將 `Contributor` 許可權指派給先前在根管理群組範圍中提及的 SPN (`/`) ，以允許租使用者層級的作業。 此許可權層級可確保 SPN 可用來部署及管理組織內任何訂用帳戶的資源。
- `Platform`在根管理群組下建立管理群組，以支援常見的平臺原則和 RBAC 指派。 此群組結構可確保將不同的原則套用至適用于您的 Azure foundation 的訂用帳戶。 它也可確保在一組基本訂用帳戶中集中計費一般資源。
- 限制在根管理群組範圍上進行的 Azure 原則指派數目 (`/`) 。 這項限制可將在較低層級管理群組中繼承的原則的偵測降至最低
- 請勿在根管理群組下建立任何訂用帳戶。 此階層可確保訂用帳戶不只會繼承在根層級管理群組指派的一小部分 Azure 原則，而不代表工作負載所需的完整集合。

## <a name="subscription-organization-and-governance"></a>訂用帳戶組織和治理

訂用帳戶是 Azure 內的管理、計費和調整單位。 當您針對大規模 Azure 採用進行設計時，他們扮演重要角色。 本節可協助您根據重要因素來捕捉訂用帳戶需求和設計目標訂用帳戶。 這些因素包括環境類型、擁有權和治理模型、組織結構和應用程式組合。

**設計考慮：**

- 訂用帳戶可作為指派 Azure 原則的界限。 例如，安全的工作負載（例如支付卡產業 (PCI) 工作負載）通常需要額外的原則才能達成合規性。 您可以與訂用帳戶達到相同的隔離，而不是使用管理群組來將需要 PCI 合規性的工作負載分組。 如此一來，您就不會有太多具有少數訂用帳戶的管理群組。
- 訂用帳戶可作為縮放單位，讓元件工作負載可以在平臺 [訂](/azure/azure-subscription-service-limits)用帳戶限制內調整。 請務必在您的工作負載設計會話期間考慮訂用帳戶資源限制。
- 訂用帳戶會提供治理和隔離的管理界限，以明確分隔考慮。
- 您可以進行手動程式，並規劃未來的自動化，以限制 Azure AD 租使用者只能使用 Enterprise 合約註冊訂閱。 此程式可防止在根管理群組範圍建立 Microsoft 開發人員的網路訂用帳戶。

**設計建議：**

- 將訂用帳戶視為大眾化的管理單位，與商務需求和優先順序一致。
- 讓訂用帳戶擁有者知道其角色和責任：
  - 在 Azure AD Privileged Identity Management 每季或兩次執行存取審查，以確保當使用者在客戶組織內移動時，不會增加許可權。
  - 取得預算支出和資源使用率的完整擁有權。
  - 請確保原則合規性，並視需要進行補救。
- 識別新訂閱的需求時，請使用下列準則：
  - **調整限制：** 訂用帳戶可作為元件工作負載的縮放單位，以在平臺訂用帳戶限制內調整規模。 例如，大型、特製化的工作負載（例如高效能運算、IoT 和 SAP）全都更適合使用個別的訂用帳戶，以避免限制 (例如 50 Azure Data Factory 整合) 的限制。
  - **管理界限：** 訂用帳戶會提供治理和隔離的管理界限，讓您能夠清楚地分隔考慮。 例如，不同的環境（例如開發、測試和生產環境）通常會與管理的觀點隔離。
  - **原則界限：** 訂用帳戶可作為 Azure 原則指派的界限。 例如，安全的工作負載（例如 PCI）通常需要額外的原則才能達成合規性。 如果使用個別的訂用帳戶，則不需要將這項額外的額外負荷視為全面性地型。 同樣地，開發環境可能會有更寬鬆的原則需求（相對於生產環境）。
  - **目標網路拓撲：** 虛擬網路無法跨訂用帳戶共用，但它們可以使用不同的技術進行連線，例如虛擬網路對等互連或 Azure ExpressRoute。 當您決定是否需要新的訂用帳戶時，請考慮哪些工作負載必須彼此通訊。
- 將訂用帳戶一起分組在管理群組結構和大規模原則需求中的管理群組下。 群組可確保具有同一組原則和 RBAC 指派的訂用帳戶可以從管理群組繼承這些訂用帳戶，以避免重複的指派。
- 在管理群組中建立專用的管理訂用帳戶 `Platform` ，以支援 Azure 監視器 Log Analytics 工作區和 Azure 自動化 runbook 等全域管理功能。
- 必要時，請在管理群組中建立專用的身分識別訂用帳戶 `Platform` ，以裝載 Windows server Active Directory 網域控制站。
- 在管理群組中建立專用的連線訂用帳戶 `Platform` ，以裝載 Azure 虛擬 WAN 中樞、私人網域名稱系統 (DNS) 、ExpressRoute 線路和其他網路資源。 專用訂用帳戶可確保所有基礎網路資源會一起計費，並與其他工作負載隔離。
- 請避免使用固定的訂用帳戶模型，並選擇改用一組彈性準則，將組織中的訂用帳戶群組在一起。 這種彈性可確保隨著組織的結構和工作負載撰寫變更，您可以建立新的訂用帳戶群組，而不是使用一組固定的現有訂閱。 所有訂用帳戶的大小都不適合。 一個營業單位適用的功能可能不適用於另一個營業單位。 某些應用程式可能會在相同登陸區域訂用帳戶內並存，而其他應用程式可能需要自己的訂用帳戶。

## <a name="configure-subscription-quota-and-capacity"></a>設定訂用帳戶配額和容量

每個 Azure 區域都包含有限數量的資源。 當您考慮採用涉及大量資源數量的企業級 Azure 採用時，請確定有足夠的容量和 Sku 可供使用，而且可以瞭解及監視可取得的容量。

**設計考慮：**

- 針對您的工作負載所需的每個服務，考慮 Azure 平臺內的限制和配額。
- 請考慮所選 Azure 區域內的必要 Sku 可用性。 例如，在某些區域中，可能只會提供新功能。 給定資源（例如 Vm）的特定 Sku 可用性，可能會與另一個區域不同。
- 請考慮訂用帳戶配額不會保證容量，而且會以每個區域為基礎來套用。

**設計建議：**

- 使用訂用帳戶作為縮放單位，並視需要相應放大資源和訂用帳戶。 然後，您的工作負載就可以在需要時使用必要的資源來相應放大，而不會在 Azure 平臺中達到訂用帳戶限制。
- 使用保留的實例來排列所需區域中保留容量的優先順序。 然後您的工作負載會有必要的容量，即使該資源在特定區域中需要很高的需求。
- 建立具有自訂視圖的儀表板，以監視已使用的容量層級。 如果容量使用率達到重大等級，請設定警示 (例如，90% 的 CPU 使用率) 。
- 在訂用帳戶布建中提高配額的支援要求 (例如，訂用帳戶內的可用 VM 核心總計) 。 這種方法可確保您的配額限制是在您的工作負載需要超過預設限制之前設定。
- 確定所選部署區域內有提供必要的服務和功能。

## <a name="establish-cost-management"></a>建立成本管理

技術資產上的成本透明化是每個大型企業組織面臨的重大管理挑戰。 本節將探討如何在大型 Azure 環境中達成成本透明度的相關重要層面。

**設計考慮：**

- 可能需要使用) 資源的共用平臺即服務 (PaaS 的計費模型，例如 Azure App Service 環境和 Azure Kubernetes Service，可能需要共用這些資源以達到更高的密度。
- 使用非生產工作負載的關機排程來將成本優化。
- 使用 Azure Advisor 來檢查成本優化建議。

**設計建議：**

- 使用 Azure 成本管理和計費來進行成本匯總。 讓應用程式擁有者可以使用它。
- 使用 Azure 資源標記進行成本分類和資源群組。 使用標籤可讓您針對共用訂用帳戶的工作負載，或跨多個訂用帳戶的指定工作負載，提供計費機制。
